/*!
 * Dark Mode Switch v1.0.1 (https://github.com/coliff/dark-mode-switch)
 * Copyright 2021 C.Oliff
 * Licensed under MIT (https://github.com/coliff/dark-mode-switch/blob/main/LICENSE)
 */
const darkSwitch = document.getElementById("darkSwitch");
const darkSwitchLabel = document.getElementById("darkSwitchLabel");

window.addEventListener("load", function () {
  if (darkSwitch) {
    initTheme();
    darkSwitch.addEventListener("change", function () {
      resetTheme();
    });
  }
});

const head = document.getElementsByTagName("head")[0];
let link = document.createElement("link");
link.rel = "stylesheet";
link.href = darkSwitch.getAttribute("data-css_Path");

function initTheme() {
  var darkThemeSelected =
    localStorage.getItem("darkSwitch") !== null &&
    localStorage.getItem("darkSwitch") === "dark";
  darkSwitch.checked = darkThemeSelected;

  if (darkThemeSelected) {
    document.body.setAttribute("data-theme", "dark");
    head.appendChild(link);
    darkSwitchLabel.innerHTML = "Turn off Dark Mode";
  } else {
    document.body.removeAttribute("data-theme");
    darkSwitchLabel.innerHTML = "Turn on Dark Mode";
  }
}
function resetTheme() {
  if (darkSwitch.checked) {
    document.body.setAttribute("data-theme", "dark");
    localStorage.setItem("darkSwitch", "dark");
    head.appendChild(link);
    darkSwitchLabel.innerHTML = "Turn off Dark Mode";
  } else {
    document.body.removeAttribute("data-theme");
    localStorage.removeItem("darkSwitch");
    head.removeChild(link);
    darkSwitchLabel.innerHTML = "Turn on Dark Mode";
  }
}
